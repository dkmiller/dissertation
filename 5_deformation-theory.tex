% !TEX root = Daniel-Miller-thesis.tex

\chapter{Deformation theory}





\section{Category of test objects}

This section summarizes the theory in 
\cite[VII\textsubscript{B}, \S 0--1]{sga3-1}, adapting it to the deformation 
theory of Galois representations. All rings are commutative with unit. 

\begin{definition}
Let $\Lambda$ be a ring. A topological $\Lambda$-module $M$ is 
\emph{pseudocompact} if it is a filtered inverse limit of discrete 
finite-length $\Lambda$-modules. The ring $\Lambda$ is pseudocompact if it 
is pseudocompact as a module over itself. 
\end{definition}

Let $\Lambda$ be a pseudocompact ring, and write $\Art_\Lambda$ for the 
opposite of the category of $\Lambda$-algebras which have finite length as 
$\Lambda$-modules. Given such a $\Lambda$-algebra $A$, write $X=\spf(A)$ for 
the corresponding object of $\Art_\Lambda$, and put $A=\sO(X)$. 

\begin{lemma}
Let $\Lambda$ be a pseudocompact ring. Then $\Art_\Lambda$ is closed under 
finite limits and colimits. 
\end{lemma}
\begin{proof}
That $\Art_\Lambda$ is closed under finite colimits follows from the fact that 
finite-length $\Lambda$-algebras are closed under finite limits (the 
underlying modules are closed under finite limits). Moreover, since the tensor 
product of finite length modules also has finite length, and quotients of 
length modules have finite length, $\Art_\Lambda$ is closed under finite 
limits. 
\end{proof}

\begin{lemma}
Let $\Lambda$ be a pseudocompact local ring. Then $\Lambda$ is henselian, in 
any of the following senses:
\begin{enumerate}
\item
Every finite $\Lambda$-algebra is a product of local $\Lambda$-algebras.

\item
The first condition is satisfied for $\Lambda$-algebras of the form 
$\Lambda[t]/f$, where $f$ is monic. 

\item
Let $\fm$ be the maximal ideal of $\Lambda$. Then $A\mapsto A/\fm$ is an 
equivalence of categories from finite \'etale $\Lambda$-algebras to 
finite \'etale $\Lambda/\fm$-algebras. 
\end{enumerate}
\end{lemma}
\begin{proof}
The conditions are equivalent by \cite[18.5.11]{ega4-4}, so we only prove 
that the first holds. Recall that 
$\Lambda = \varprojlim \Lambda/\fa$, where $\fa$ ranges over closed ideals of 
finite index. Let $A$ be a pseudocompact $\Lambda$-algebra. For any 
ideal $\fa\subset \Lambda$, the ring $\Lambda/\fa$ is henselian by 
\cite[18.5.14]{ega4-4}, so $A/\fa$ is a product of local 
$\Lambda/\fa$-algebras. Moreover, by \cite[18.5.4]{ega4-4}, the map 
$A/\fa \to A/\fm$ is a bijection on idempotents. The inverse limit of 
these compatible systems of idempotents decompose $A$ into a product of local 
$\Lambda$-algebras. 
\end{proof}

Following Grothendieck, if $\cC$ is an arbitrary category, we write 
$\widehat\cC=\hom(\cC^\circ,\sets)$ for the category of contravariant functors 
$\cC\to \sets$. We regard $\cC$ as a full subcategory of $\widehat\cC$ via the 
Yoneda embedding: for $X,Y\in \cC$, write $X(Y) = \hom_\cC(Y,X)$. With 
this notation, the Yoneda Lemma states that $\hom_{\widehat\cC}(X,P) = P(X)$ 
for all $X\in \cC$. 

\begin{lemma}[{\cite[6.1]{kashiwara-schapira-2006}}]\label{thm:ind-object-def}
Let $\cX\in\widehat{\Art_\Lambda}$. Then $\cX$ is left exact if and only 
if there exists a filtered system $\{X_i\}_{i\in I}$ in $\cC_\Lambda$ together 
with a natural isomorphism $\cX\simeq \varinjlim X_i$. Write 
$\Ind(\Art_\Lambda)$ for the category of such functors. Then 
$\Ind(\Art_\Lambda)$ is closed under colimits, and the 
Yoneda embedding $\Art_\Lambda\monic\Ind(\Art_\Lambda)$ 
preserves filtered colimits.
\end{lemma}

\begin{lemma}[{\cite[6.1.17]{kashiwara-schapira-2006}}]\label{lem:ind-cat-left-exact}
The functors $\Art_\Lambda \to \Ind(\Art_\Lambda) \to \widehat{\Art_\Lambda}$ 
are left exact.
\end{lemma}

If $R$ is a pseudocompact $\Lambda$-algebra, write $\spf(R)$ for the object of 
$\widehat{\Art_\Lambda}$ defined by $\spf(R)(A)=\hom_{\cts/\Lambda}(R,A)$, 
the set of continuous $\Lambda$-algebra homomorphisms. 

\begin{lemma}[{\cite[VII\textsubscript{B} 0.4.2 Prop.]{sga3-1}}]
The funtor $\spf$ induces an (anti-)equivalence between the category of 
pseudocompact $\Lambda$-algebras and $\Ind(\Art_\Lambda)$. 
\end{lemma}

So $\Ind(\Art_\Lambda)$ is the category of pro-representable 
functors on finite length $\Lambda$-algebras. \emph{Warning}: in many papers, 
for example the foundational \cite{mazur-1995}, one reserves the term 
\emph{pro-representable} for functors of the form $\spf(R)$, where $R$ is 
required to be noetherian. We do not make this restriction. 

\begin{lemma}\label{thm:exponential-ideal}
The category $\Ind(\Art_\Lambda)$ is an exponential ideal in 
$\widehat{\Art_\Lambda}$. 
\end{lemma}
\begin{proof}
By this we mean the following. Let $\cX\in \Ind(\Art_\Lambda)$, 
$P\in \widehat{\Art_\Lambda}$. Then the functor $\cX^P$ defined by 
\[
	\cX^P(S) = \hom_{\widehat{\Art_\Lambda}_{/S}}(P_{/S},\cX_{/S}) 
\]
is also in $\Ind(\Art_\Lambda)$. Given the characterization of 
$\Ind(\Art_\Lambda)$ as left exact functors, this is follows directly from 
\cite[4.2.3]{johnstone-2002}. 
\end{proof}

If $\cC$ is a category, we write $\Gp(\cC)$ for the category of group 
objects in $\cC$. 

\begin{corollary}\label{thm:framed-deformation}
Let $\Gamma\in \Gp(\widehat{\Art_\Lambda})$ and 
$\cG\in \Gp(\Ind(\Art_\Lambda))$, then the functor 
$[\Gamma,\cG]$ defined by 
\[
	[\Gamma,\cG](S) = \hom_{\Gp/S}(\Gamma_{/S},\cG_{/S}) 
\]
is in $\Ind(\Art_\Lambda)$. In particular, if $\Gamma$ is a 
profinite group, then the functor 
\[
	[\Gamma,\cG](S) = \hom_{\cts/\Gp}(\Gamma,\cG(S))
\]
is in $\Ind(\Art_\Lambda)$. 
\end{corollary}
\begin{proof}
The first claim follows easily from Lemma \ref{thm:exponential-ideal} and 
Lemma \ref{lem:ind-cat-left-exact}. Just note that $[\Gamma,\cG]$ is the 
equalizer:
\[
\begin{tikzcd}
	{[\Gamma,\cG]} \ar[r]
		& \cG^\Gamma \ar[r, "m_\Gamma^\ast", shift left=.5ex] \ar[r, "m_{\cG\ast}"', shift right=.5ex]
		& \cG^{\Gamma\times \Gamma} ,
\end{tikzcd}
\]
that is, those $f\colon \Gamma\to \cG$ such that 
$f\circ m_\Gamma = m_\cG\circ(f\times f)$. The latter claim is just 
a special case. 
\end{proof}





\section{Quotients in the flat topology}

If $\Lambda$ is a pseudocompact ring, the category 
$\Ind(\Art_\Lambda)$ has nice ``geometric'' properties. However, 
for operations like taking quotients, we will embed it into the larger category 
$\Sh_\fl(\Art_\Lambda)$ of flat sheaves. We call a collection 
$\{U_i\to X\}$ of morphisms in $\Art_\Lambda$ a \emph{flat cover} if each 
ring map $\sO(X)\to \sO(U_i)$ is flat, and moreover 
$\sO(X)\to \prod \sO(U_i)$ is faithfully flat. By \cite[IV 6.3.1]{sga3-1}, this 
is a subcanonical Grothendieck topology on $\Art_\Lambda$. We call it the 
\emph{flat topology}, even though finite presentation comes for free because 
all the rings are finite length. 

\begin{lemma}
Let $\Sh_\fl(\Art_\Lambda)$ be the category of sheaves (of sets) on 
$\Art_\Lambda$ with respect to the flat topology. Then a presheaf 
$P\in \widehat{\Art_\Lambda}$ lies in $\Sh_\fl(\Art_\Lambda)$ if 
and only if $P(\coprod U_i) = \prod P(U_i)$ and whenever 
$U \to X$ is a flat cover where $\sO(U)$ and $\sO(X)$ are local rings, the 
sequence 
\[
\begin{tikzcd}
	P(X) \ar[r]
		& P(U) \ar[r, shift left=.5ex] \ar[r, shift right=.5ex]
		& P(U\times_X U) .
\end{tikzcd}
\]
is exact. Moreover, 
$\Ind(\Art_\Lambda)\subset \Sh_\fl(\Art_\Lambda)$. 
\end{lemma}
\begin{proof}
The first claim is the content of \cite[IV 6.3.1(ii)]{sga3-1}. For the second, 
note that any $\cX\in \Ind(\Art_\Lambda)$ will, by Lemma 
\ref{thm:ind-object-def}, convert (arbitrary) colimits into limits. Thus 
$\cX(\coprod U_i) = \prod \cX(U_i)$. If $U\to X$ is a flat cover, then by (loc.~cit.), $U\times_X U\rightrightarrows U\to X$ is a coequalizer diagram in 
$\Art_\Lambda$, hence 
$\cX(X)\to \cX(U)\rightrightarrows \cX(U\times_X U)$ is an equalizer. 
\end{proof}

Our main reason for introducing the category $\Sh_\fl(\Art_\Lambda)$ 
is that, as a Grothendieck topos, it is closed under arbitrary colimits. 
Recall that in an \emph{equivalence relation} in $\widehat{\Art_\Lambda}$ 
is a morphism $R\to X\times X$ such that, for all $S$, the map 
$R(S)\to X(S)\times X(S)$ is an injection whose image is an equivalence 
relation on $X(S)$. We define the quotient $X/R$ to be the coequalizer 
\[
\begin{tikzcd}
	R \ar[r, shift left=.5ex] \ar[r, shift right=.5ex]
		& X \ar[r]
		& X/R .
\end{tikzcd}
\]
By Giraud's Theorem \cite[App.]{maclane-moerdijk-1994}, for any 
$S\in \Art_\Lambda$, the natural map $X(S)/R(S)\to (X/R)(S)$ is injective. 
It will not be surjective in general. 

We let $\Sh_\fl(\Art_\Lambda)$ inherit definitions from 
$\Art_\Lambda$ as follows. If $P$ is a property of maps in 
$\Art_\Lambda$ (for example, ``flat,'' or ``smooth,'') and 
$f\colon X\to Y$ is a morphism in $\Sh_\fl(\Art_\Lambda)$, we say 
that $f$ has $P$ if for all $S\in \Art_\Lambda$ and $y\in Y(S)$, the 
pullback $X_S=X\times_Y S$ lies in $\Art_\Lambda$, and the pullback map 
$X_S\to S$ has property $P$. For example, if $X=\spf(R')$ and $Y=\spf(R)$, then 
$X\to Y$ has property $P$ if and only if for all finite length $A$ and 
continuous $\Lambda$-algebra maps $R\to A$, the induced map 
$A\to R'\otimes_R A$ has $P$.

\begin{theorem}\label{thm:quotients-ind}
Let $\cR\to \cX\times \cX$ be an equivalence relation in 
$\Ind(\Art_\Lambda)$ such that one of the maps $\cR\to \cX$ is 
flat. Then the quotient $\cX/\cR$ lies in $\Ind(\Art_\Lambda)$, and 
$\cX\to \cX/\cR$ is a flat cover. 
\end{theorem}
\begin{proof}
This is \cite[VII\textsubscript{B} 1.4]{sga3-1}. 
\end{proof}

By \cite[29.7]{matsumura-1989}, if $k$ is a field and $R$ is a complete regular 
local $k$-algebra, then $R\simeq k\pow{t_1,\dots,t_n}$. In particular, $R$ 
admits an augmentation $\epsilon\colon R\to k$. There is a general analogue of 
this result, but first we need a definition. 

\begin{definition}
A map $f\colon \cX\to \cY$ in $\Ind(\Art_\Lambda)$ is a 
\emph{residual isomorphism} if for all $S=\spf(k)\in \Art_\Lambda$ where 
$k$ is a field, the map $f\colon \cX(S)\to \cY(S)$ is a bijection. 
\end{definition}

\begin{lemma}\label{thm:smooth-section}
Let $f\colon \cX\to \cY$ be a smooth map in $\Ind(\Art_\Lambda)$ 
that is a residual isomorphism. Then $f$ admits a section. 
\end{lemma}
\begin{proof}
By \cite[VII\textsubscript{B} 0.1.1]{sga3-1}, it suffices to prove the result 
when $\cX=\spf(R')$, $\cY=\spf(R)$, for local $\Lambda$-algebras $R\to R'$ 
with the same residue field. Let $k=R/\fm_R \iso R'/\fm_{R'}$ be their common 
residue field. From the diagram 
\[
\begin{tikzcd}
	R' \ar[r, dotted] \ar[dr, two heads]
		& R \ar[d, two heads] \\
	R \ar[u] \ar[ur, equal] \ar[r, two heads]
		& k ,
\end{tikzcd}
\]
the definition of formal smoothness, and a limiting argument involving the 
finite length quotients $R/\fa$, we obtain the result. 
\end{proof}

\begin{corollary}\label{thm:quotients-good}
Let $\cR\to \cX\times \cX$ be an equivalence relation satisfying the hypotheses 
of Theorem \ref{thm:quotients-ind}. Suppose further that 
\begin{enumerate}
\item
One of the maps $\cR\to \cX$ is smooth, and 

\item
The projection $\cX\to \cX/\cR$ is a residual isomorphism. 
\end{enumerate}
Then $\cX\to \cX/\cR$ admits a section, so $\cX(S)/\cR(S)\iso (\cX/\cR)(S)$ 
for all $S\in \Art_\Lambda$. 
\end{corollary}
\begin{proof}
By \ref{thm:smooth-section}, it suffices to prove that $\cX\to \cX/\cR$ is 
smooth. By \cite[17.7.3(ii)]{ega4-4}, smoothness can be detected after flat 
descent. So base-change with respect to the projection $\cX\to \cX/\cR$. In the 
following commutative diagram 
\[
\begin{tikzcd}[column sep=small, row sep=small]
	\cR \ar[dr, equal] \ar[drr, bend left] \ar[ddr, bend right] \\
	& \cX\times_{\cX/\cR}\cX \ar[r] \ar[d]
		& \cX \ar[d] \\
	& \cX \ar[r]
		& \cX/\cR
\end{tikzcd}
\]
we can ensure the smoothness of $\cR\to \cX$ by our hypotheses. Since  
$\cX\to \cX/\cR$ is smooth after flat base-change, the original map is smooth. 
\end{proof}

\begin{example}
The hypothesis on residue fields in \ref{thm:quotients-good} is necessary. To 
see this, let $\Lambda=k$ be a field, $k\monic K$ a finite Galois extension 
with Galois group $G$. Then $G\times \spf(K)\rightrightarrows \spf(K)$ has 
quotient $\spf(k)$, but the map $\spf(K)(S)\to \spf(k)(S)$ is \emph{not} 
surjective for all $S\in \Art_k$, e.g.~it is not for $S=\spf(k)$. 
\end{example}

\begin{example}
The hypothesis of smoothness in Theorem \ref{thm:quotients-good} is necessary. 
To see this, let $k$ be a field of characteristic $p>0$. Then the formal 
additive group $\widehat\Ga=\spf(k\pow{t})$ has a subgroup $\balpha_p$ defined 
by 
\[
  \balpha_p(S) = \{s\in \sO(S)\colon s^p=0\} .
\]
The quotient $\widehat\Ga/\balpha_p$ has as affine coordinate ring 
$k\pow{t^p}$. In particular, the following sequence is exact in the flat 
topology:
\[
\begin{tikzcd}
	0 \ar[r]
		& \balpha_p \ar[r]
		& \widehat\Ga \ar[r, "(\cdot)^p"]
		& \widehat\Ga \ar[r]
		& 0 .
\end{tikzcd}
\]
It follows that 
$\balpha_p\times \widehat\Ga\rightrightarrows\widehat\Ga\xrightarrow{(\cdot)^p} \widehat\Ga$
is a coequalizer in $\Sh_\fl(\Art_k)$ satisfying all the hypothese 
of \ref{thm:quotients-good} except smoothness. And indeed, as one sees by 
letting $S=\spf(A)$ for any non-perfect $k$-algebra $A$, the map 
$(\cdot)^p\colon \widehat\Ga(S)\to \widehat\Ga(S)$ is \emph{not} surjective for 
all $S$. 
\end{example}





\section{Deformations of group representations}

Here we elaborate on (and correct some mistakes in) the arguments in 
\cite[\S 2.1]{bockle-2013}. 

Let $\Gamma\in \Gp(\widehat{\Art_\Lambda})$ and $G_{/\Lambda}$ be a smooth 
group scheme of finite type. Write $\widehat G$ for the group object in 
$\Ind(\Art_\Lambda)$ given by $\widehat G(\spf A) = G(\spec A)$. By 
Corollary \ref{thm:framed-deformation}, the functor 
\[
  \Rep^\square(\Gamma,\widehat G)(S) = \hom_{\Gp/S}(\Gamma_S,\widehat G_S) = \hom_{\Gp}(\Gamma(S), G(S)) 
\]
is in $\Ind(\Art_\Lambda)$. We would like to define an ind-scheme 
$\Rep(\Gamma,\cG)$ as ``$\Rep^\square(\Gamma,\cG)$ modulo conjugation,'' but 
this requires some care. The conjugation action of $\cG$ on 
$\Rep^\square(\Gamma,\cG)$ will have fixed points, so the quotient will be 
badly behaved. We loosely follow \cite[Ch.~2--3]{tilouine-1996} in dealing with 
this potential problem. 

Assume $\Lambda$ is local, with maximal ideal $\fm$ and residue field $k$. 
Fix $\bar\rho\in \Rep^\square(\Gamma,\widehat G)(k)$, i.e.~a residual 
representation $\bar\rho\colon \Gamma\to G(k)$. Let 
$\Rep^\square(\Gamma,\widehat G)_{\bar\rho}$ be the connected component of 
$\bar\rho$ in $\Rep^\square(\Gamma,\widehat G)$. Assume 
that $G$ and $\zentrum(G)$ are smooth; then the quotient 
$\widehat{G}^{\circ,\ad}=\widehat G^\circ/\zentrum(\widehat G^\circ)$ is also 
smooth, where $(-)^\circ$ denotes ``connected component of identity.'' 
Since $\zentrum(\widehat G^\circ)$ is smooth, the quotient sheaf 
$\widehat G^{\circ,\ad}$ is the same as the quotient presheaf. 

\begin{theorem}
Suppose $(\Lambda,\fm,k)$ is local. If $\cX,\cY\in \Ind(\Art_\Lambda)$ are 
connected and $\cX(k)\ne\varnothing$, then $\cX\times_\Lambda \cY$ is 
connected. 
\end{theorem}
\begin{proof}
We are reduced to proving the following result from commutative algebra: if 
$R,S$ are local pro-artinian $\Lambda$-algebras and $R$ has residue field 
$\kk$, then $R\widehat\otimes_\Lambda S$ is local. Since 
$R\widehat\otimes_\Lambda S = \varprojlim (R/\fr)\otimes_\Lambda (S/\fs)$, 
$\fr$ (resp.~$\fs$) ranging over all open ideals in $R$ (resp.~$S$), we may 
assume that both $R$ and $S$ are artinian. The rings $R$ and $S$ are 
henselian, so $R\otimes S$ is local if and only if 
$(R/\fm_R)\otimes (S/\fm_S) = S/\fm_S$ is local, which it is. 
\end{proof}

We conclude that the action of $\widehat G^{\circ,\ad}$ on 
$\Rep^\square(\Gamma,\widehat G)$ 
preserves $\Rep^\square(\Gamma,\cG)_{\bar\rho}$. Thus we may put 
\[
	\Rep(\Gamma,G)_{\bar\rho} = \Rep^\square(\Gamma,\widehat G)_{\bar\rho} / \widehat G^{\circ,\ad} .
\]
This quotient will only be well-behaved if $\widehat G^{\circ,\ad}$ 
acts faithfully on $\Rep^\square(\Gamma,\widehat G)$. That faithfulness (or 
lack thereof) is governed by the action of $\Gamma$ on $\fg(k)$. Let 
$\fz = \lie(\zentrum(G))$. 

\begin{lemma}\label{lem:stab=H0}
Let $A_1 \twoheadrightarrow A_0$ be a square-zero extension of artinian 
$\Lambda$-algebras with kernel $I$. Let $\rho\in \Rep^\square(\Gamma,G)$. 
Then $\stab_{\ker(G(A_1) \to G(A_0))}(\rho) = \exp(\h^0(\Gamma,\fg(I))$. 
\end{lemma}
\begin{proof}
First, note that $\ker(G(A_1) \to G(A_0)) = \exp(\fg(I))$. For $X\in \fg(I)$, 
$X\in \stab_{\ker(G(A_1) \to G(A_0))}(\rho)$ if and only if 
$\exp(X) \rho \exp(-X) = \rho$, i.e.~$\rho^{-1} \exp(X) \rho = \exp(X)$, 
which is clearly equivalent to $X\in \h^0(\Gamma,\fg(I))$. 
\end{proof}

\begin{theorem}
Let $\Gamma,G,\bar\rho$ be as above. Assume $\h^0(\Gamma,\fg(k))=\fz(k)$. Then 
$\Rep(\Gamma,G)_{\bar\rho}$ exists and, for $A$ a local $\Lambda$-algebra, 
consists of $\widehat G^\circ(A)$-conjugacy classes of maps 
$\Gamma \to  G(A)$ that reduce to $\bar\rho$ modulo $\fm_A$. 
\end{theorem}
\begin{proof}
We begin by proving that if $\h^0(\Gamma,\fg(k)) = \fz(k)$, then 
$\widehat G^{\circ,\ad}$ acts faithfully on $\Rep^\square(\Gamma,\widehat G)$. 
First, note that if the given $\h^0 = \fz$, then 
$\h^0(\Gamma,\fg^\ad(k)) = 0$, where 
$\fg^\ad = \lie(\widehat G^{\circ,\ad}) = \fg / \fz$. The action of 
$\widehat G^{\circ,\ad}$ is faithful if and only if, whenever $A$ is a local 
Artinian $\Lambda$-algebra and $\rho\colon \Gamma \to G(A)$ agrees with 
$\bar\rho$ modulo $\fm_A$, and for $g\in G(A)$ with $g\equiv 1$ modulo 
$\fm_A$, then if $g \rho g^{-1} = \rho$, we have $g = 1$. 
Let $I\subset A$ be a square-zero ideal that is one-dimensional over $k$. By 
induction on the length of $A$, we may assume that $g \equiv 1$ modulo 
$I$. Applying Lemma \ref{lem:stab=H0}, we see that $g = 1$. 

Since the action of $\widehat G^{\circ,\ad}$ on 
$\Rep^\square(\Gamma,\widehat G)_{\bar\rho}$ is faithful, we can apply 
Theorem \ref{thm:quotients-good} to see that $\Rep(\Gamma,G)_{\bar\rho}$ is 
the presheaf quotient, which is exactly what is described in the statement of 
the theorem. 
\end{proof}





\section{Tangent spaces and obstruction theory}

A routine argument shows that if $I\subset A$ is a square-zero ideal, and 
$\rho\colon \Gamma \to G(A/I)$ admits some lift to $G(A)$, then the set of 
such lifts form a $\h^1(\Gamma,\fg(I))$-torsor. We show that obstruction 
theory also works in this more general context. 

For $S_0\in \Art_\Lambda$, let $\Exal_{S_0}$ be the category of square-zero 
thickenings of $S_0$. An object of $\Exal_{S_0}$ is a closed embedding 
$S_0\hookrightarrow S$ whose ideal of definition has square zero. For any 
such object, there is an ``exponential exact sequence''
\[
\begin{tikzcd}
	0 \ar[r]
		& \fg(I) \ar[r]
		& G(S) \ar[r]
		& G(S_0) \ar[r]
		& 1
\end{tikzcd}
\]
This gives us a class $\exp\in \h^2(G(S_0),\fg(I))$. For 
$\rho_0\colon \Gamma\to G(S_0)$, the obstruction class is 
$o(\rho_0,I) = \rho_0^\ast(\exp)\in \h^2(\Gamma,\fg(I))$. It's easy to check 
that $o(\rho_0,I)=0$ if and only if $\rho_0$ lifts to $\rho$. More formally, 
we use \cite[6.6.4]{weibel-1994}. Given setting as above, $\rho_0^\ast(\exp)$ 
is the pullback by $\rho_0$:
\[
\begin{tikzcd}
	0 \ar[r] 
		& \fg(I) \ar[r] \ar[d, equals]
		& \cG(S)\times_{\cG(S_0)} \Gamma \ar[r] \ar[d] 
		& \Gamma \ar[d, "\rho_0"] \ar[r]
		& 1 \\
	0 \ar[r] 
		& \fg(I) \ar[r]
		& \cG(S) \ar[r] 
		& \cG(S_0) \ar[r] 
		& 1 .
\end{tikzcd}
\]

\begin{proposition}
Let $f\colon G\to H$ be a morphism of profinite groups. Suppose $M$ is a 
discrete $H$-module and $c\in \h^2(H,M)$ corresponds to the extension 
\[
\begin{tikzcd}
	0 \ar[r]
		& M \ar[r]
		& \widetilde H \ar[r]
		& H \ar[r] 
		& 1 .
\end{tikzcd}
\]
Then $f^\ast c=0$ in $\h^2(G,M)$ if and only if there is a map 
$\widetilde f\colon G\to \widetilde H$ making the following diagram commute: 
\[
\begin{tikzcd}[row sep=small]
	& \widetilde H \ar[dd] \\
	G \ar[ur, "\widetilde f"] \ar[dr, "f"] \\
	& H .
\end{tikzcd}
\]
\end{proposition}
\begin{proof}
By \cite[6.6.4]{weibel-1994}, the class $f^\ast c$ corresponds to the pullback 
diagram: 
\[
\begin{tikzcd}
	0 \ar[r]
		& M \ar[r] \ar[d, equals]
		& G\times_H \widetilde{H} \ar[r] \ar[d] 
		& G \ar[r] \ar[d, "f"]
		& 1 \\
	0 \ar[r]
		& M \ar[r]
		& \widetilde H \ar[r]
		& H \ar[r] 
		& 1 .
\end{tikzcd}
\]
Writing explicitly what it means for $G\times_H \widetilde H \to G$ to split 
yields the result. 
\end{proof}

\begin{corollary}
Let $\rho\in \Rep(\Gamma,G)_{\bar\rho}(A/I)$, where $I$ is a square-zero ideal. 
Then $\rho$ lifts to $A$ if and only if $\rho^\ast(\exp_I) = 0$ in the group 
$\h^2(\Gamma,\fg(I))$. 
\end{corollary}
